# FCS Database
`Golang Database` via **HTTP** using *LevelDB* and *JsonPATH* (by Flume Cloud Services)

## Installation

### Docker

Docker is coming

### Manually

```bash
mkdir $GOPATH/src/github.com/flume-cloud-services && cd $GOPATH/src/github.com/flume-cloud-services
git clone https://github.com/flume-cloud-services/database.git
go get -d -v
go install -v

FLUME_DATABASE_ADMIN=admin_name FLUME_DATABASE_SECRET=secret_token database
```

## Usage

Use the `signin` route with the following body to generate the JWT token :

```
POST /signin

Body:
    - name: The admin name given in FLUME_DATABASE_ADMIN by default it's simply "admin"

Return:
    - If success :
        - A JWT Token
        - The cookie with the previously generated JWT Token
    - If failed :
        - Unauthorized Status
        - Bad request Status
```

Check if the jwt is correctly generated by visiting `welcome` route :

```
GET /welcome

Return:
    - If success :
        - Welcome to you visitor !
    -If failed :
        - Unauthorized Status
```

Then create a database using the `/database/create` route :

```
POST /database/create

Body:
    - name: The database name

Return:
    - If success :
        - Database <name> succesfully created
    - If failed :
        - Bad Request Status
        - Internal Server Error Status
```

You can delete the previously created database using the `database/delete` route :

```
POST /database/delete

Body:
    - name: The database name

Return:
    - If success :
        - Database <name> succesfully deleted
    - If failed :
        - Bad Request Status
        - Internal Server Error Status
```

Then you have to insert data into a specific table using `/insert` :

```
POST /insert

Body:
    - database: The database name
    - table: The table name
    - content: The JSON stringified content of the table

Return:
    - If success :
        - Data successfully inserted into table <table>
    - If failed :
        - Bad Request Status
        - Internal Server Error Status
```

Now you can query your database unsing [JsonPATH](https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html) (I recommend you to know the basics of JsonPATH) and the `/query` route :

```
POST /query

Body:
    - name: The database name
    - query: The JsonPATH query

Return:
    - If success :
        - The response of the given query
    - If failed :
        - Bad Request Status
        - Internal Server Error Status
```

### How to query

`$` will return the specified database and its content

`$.table` will return the specified table and its content

You can now query the table as you want !